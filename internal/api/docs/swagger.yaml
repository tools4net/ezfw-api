basePath: /api/v1
definitions:
  github_com_tools4net_ezfw_backend_internal_models.APIObject:
    properties:
      listen:
        description: Address to listen on for gRPC (optional)
        type: string
      services:
        description: List of API services to enable, e.g., "HandlerService", "StatsService"
        items:
          type: string
        type: array
      tag:
        description: Tag for routing requests to this API
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.AllocateObject:
    properties:
      concurrency:
        description: Default 3
        type: integer
      refresh:
        description: In minutes, default 5
        type: integer
      strategy:
        description: '"always" or "random", default "always"'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.Balancer:
    properties:
      selector:
        description: Selects outbounds by tag pattern
        items:
          type: string
        type: array
      strategy:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.BalancerStrategyObject'
      tag:
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.BalancerStrategyObject:
    properties:
      settings:
        additionalProperties: true
        description: 'Specific settings for the strategy, e.g., for leastPing: {"observerTag":
          "tag", "expected": ["ip"], "maxDeviation": 100, "tolerance": 1.5}'
        type: object
      type:
        description: '"random", "leastPing"'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.Bridge:
    properties:
      domain:
        description: Required
        type: string
      tag:
        description: Required
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.BurstObservatoryObject:
    properties:
      probeInterval:
        type: string
      probeURL:
        type: string
      subjectSelector:
        items:
          type: string
        type: array
    type: object
  github_com_tools4net_ezfw_backend_internal_models.Certificate:
    properties:
      certificate:
        description: Certificate content as string array (PEM format)
        items:
          type: string
        type: array
      certificateFile:
        type: string
      key:
        description: Key content as string array (PEM format)
        items:
          type: string
        type: array
      keyFile:
        type: string
      ocspStapling:
        description: Refresh interval in seconds, default 3600
        type: integer
      oneTimeLoading:
        description: New, default false
        type: boolean
      usage:
        description: '"encipherment", "verify", "issue", "ignored" (new)'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.DNSObject:
    properties:
      clientIp:
        description: Client IP for EDNS
        type: string
      disableCache:
        type: boolean
      disableFallback:
        type: boolean
      disableFallbackIfMatch:
        description: New name for former `disableFeature`
        type: boolean
      hosts:
        additionalProperties: true
        description: 'Static host mappings. Value can be string IP, []string IPs,
          or Address object ({"address": "ip"})'
        type: object
      queryStrategy:
        description: '"UseIP", "UseIPv4", "UseIPv6"'
        type: string
      servers:
        description: List of DNS servers. Can be string (IP or "localhost") or DnsServerObject.
        items: {}
        type: array
      tag:
        description: Tag for routing DNS queries through a specific outbound
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.DomainSocketSettings:
    properties:
      abstract:
        description: Default false, Linux only
        type: boolean
      padding:
        description: Default false, Linux abstract only
        type: boolean
      path:
        description: Required
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.ErrorResponse:
    properties:
      error:
        example: Detailed error message
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.FakeDNSObject:
    properties:
      ipPool:
        description: CIDR format, e.g., "198.18.0.0/15", Required
        type: string
      poolSize:
        description: Default 65535
        type: integer
      udpExtra:
        description: 'Deprecated: "disable"'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.GRPCSettings:
    properties:
      health_check_timeout:
        description: Seconds
        type: integer
      idle_timeout:
        description: Seconds
        type: integer
      initial_windows_size:
        description: Bytes
        type: integer
      multiMode:
        description: Default false
        type: boolean
      permit_without_stream:
        description: Default false
        type: boolean
      serviceName:
        type: string
      user_agent:
        description: New
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.HTTP2Settings:
    properties:
      healthCheckTimeout:
        description: New
        type: integer
      host:
        description: List of domains
        items:
          type: string
        type: array
      method:
        description: New, default "PUT"
        type: string
      path:
        description: Path for HTTP/2 requests
        type: string
      readIdleTimeout:
        description: New
        type: integer
    type: object
  github_com_tools4net_ezfw_backend_internal_models.HeaderObject:
    properties:
      request:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.RequestConfig'
        description: Used if type is "http"
      response:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ResponseConfig'
        description: Used if type is "http"
      type:
        description: '"none", "http", "srtp", "utp", "wechat-video", "dtls", "wireguard"'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.InboundObject:
    properties:
      allocate:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.AllocateObject'
      listen:
        type: string
      port:
        description: int or string like "1000-2000"
      protocol:
        description: e.g., "vmess", "vless", "trojan", "socks", "http"
        type: string
      settings:
        additionalProperties: true
        description: Protocol-specific settings
        type: object
      sniffing:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SniffingObject'
      streamSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.StreamSettingsObject'
      tag:
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.KCPSettings:
    properties:
      congestion:
        type: boolean
      downlinkCapacity:
        type: integer
      header:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.HeaderObject'
      mtu:
        type: integer
      readBufferSize:
        type: integer
      seed:
        type: string
      tti:
        type: integer
      uplinkCapacity:
        type: integer
      writeBufferSize:
        type: integer
    type: object
  github_com_tools4net_ezfw_backend_internal_models.LevelPolicy:
    properties:
      bufferSize:
        description: Buffer size in KB. 0 for default Xray buffer. -1 for no buffer
          (direct copy).
        type: integer
      connIdle:
        description: Idle connection timeout in seconds, default 300.
        type: integer
      downlinkOnly:
        description: Downlink only traffic duration in seconds, default 0 (disabled).
        type: integer
      handshake:
        description: Connection handshake timeout in seconds, default 4.
        type: integer
      maxConnections:
        description: Maximum number of connections for a user of this level, default
          0 (unlimited). (Newer field)
        type: integer
      statsUserDownlink:
        description: Enable downlink stats for users of this level, default false.
        type: boolean
      statsUserUplink:
        description: Enable uplink stats for users of this level, default false.
        type: boolean
      uplinkOnly:
        description: Uplink only traffic duration in seconds, default 0 (disabled).
        type: integer
    type: object
  github_com_tools4net_ezfw_backend_internal_models.LogObject:
    properties:
      access:
        description: Path to access log file
        type: string
      dnsLog:
        description: Enable DNS log
        type: boolean
      error:
        description: Path to error log file
        type: string
      loglevel:
        description: '"debug", "info", "warning", "error", "none"'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.MetricsObject:
    properties:
      listen:
        description: Optional, address to listen on (Prometheus format)
        type: string
      port:
        description: Optional, port to listen on (Prometheus format)
        type: integer
      tag:
        description: Required
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.MuxObject:
    properties:
      concurrency:
        description: 1-1024, default 8
        type: integer
      enabled:
        description: Default false
        type: boolean
      padding:
        description: New in v1.8.4, enable padding for mux frames
        type: boolean
      xudpConcurrency:
        description: For QUIC, default 8
        type: integer
      xudpProxyUDP443:
        description: '"disabled", "skip", "prefer" (for QUIC)'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.ObservatoryObject:
    properties:
      probeInterval:
        description: Required, duration string e.g. "10m", "1h"
        type: string
      probeURL:
        description: Required
        type: string
      subjectSelector:
        description: Required
        items:
          type: string
        type: array
    type: object
  github_com_tools4net_ezfw_backend_internal_models.OutboundObject:
    properties:
      mux:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.MuxObject'
      protocol:
        description: e.g., "vmess", "vless", "freedom", "blackhole"
        type: string
      proxySettings:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ProxySettings'
        description: For daisy-chaining
      sendThrough:
        description: IP address to send traffic through
        type: string
      settings:
        additionalProperties: true
        description: Protocol-specific settings
        type: object
      streamSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.StreamSettingsObject'
      tag:
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.PolicyObject:
    properties:
      levels:
        additionalProperties:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.LevelPolicy'
        description: Key is user level as string (e.g., "0", "1")
        type: object
      system:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SystemPolicy'
    type: object
  github_com_tools4net_ezfw_backend_internal_models.Portal:
    properties:
      domain:
        description: Required, or use `domains` for multiple subdomains
        type: string
      tag:
        description: Required
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.ProxySettings:
    properties:
      tag:
        description: Tag of another outbound to use as transport proxy
        type: string
      transportLayer:
        description: VLESS specific, handle proxying at transport layer
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.QUICSettings:
    properties:
      header:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.HeaderObject'
        description: Header obfuscation
      key:
        type: string
      security:
        description: '"none", "aes-128-gcm", "chacha20-poly1305"'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.RealitySettingsObject:
    properties:
      dest:
        description: Destination server address and port, e.g., "example.com:443"
        type: string
      maxClientVer:
        description: Maximum client Xray version
        type: string
      maxTimeDiff:
        description: Max time difference in ms, default 0 (disabled)
        type: integer
      minClientVer:
        description: Minimum client Xray version, e.g., "1.8.0"
        type: string
      privateKey:
        description: Base64 encoded private key (generated by `xray x25519`)
        type: string
      serverNames:
        description: List of server names to mimic
        items:
          type: string
        type: array
      shortIds:
        description: List of short IDs (0-15 byte hex strings)
        items:
          type: string
        type: array
      show:
        description: If true, REALITY debug info will be shown in log
        type: boolean
      spiderX:
        description: Path for crawling destination server, default "/"
        type: string
      xver:
        description: Proxy version, 0 or 1. Default 0.
        type: integer
    type: object
  github_com_tools4net_ezfw_backend_internal_models.RequestConfig:
    properties:
      headers:
        additionalProperties: true
        description: Value can be string or []string
        type: object
      method:
        type: string
      path:
        items:
          type: string
        type: array
      version:
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.ResponseConfig:
    properties:
      headers:
        additionalProperties: true
        description: Value can be string or []string
        type: object
      reason:
        type: string
      status:
        type: string
      version:
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.ReverseObject:
    properties:
      bridges:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.Bridge'
        type: array
      portals:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.Portal'
        type: array
    type: object
  github_com_tools4net_ezfw_backend_internal_models.RoutingObject:
    properties:
      balancers:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.Balancer'
        type: array
      domainMatcher:
        description: '"linear", "mph" (new)'
        type: string
      domainStrategy:
        description: '"AsIs", "IPIfNonMatch", "IPOnDemand", "IPIfNonMatchElseAsIs"'
        type: string
      rules:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.RoutingRule'
        type: array
    type: object
  github_com_tools4net_ezfw_backend_internal_models.RoutingRule:
    properties:
      attrs:
        description: HTTP attributes matching
        type: string
      balancerTag:
        description: Target balancer tag
        type: string
      domain:
        description: Domains to match
        items:
          type: string
        type: array
      domainMatcher:
        description: '"linear", "mph" (per rule)'
        type: string
      enabled:
        description: 'New: enable/disable rule'
        type: boolean
      inboundTag:
        items:
          type: string
        type: array
      ip:
        description: Source/Destination IPs or CIDRs to match
        items:
          type: string
        type: array
      network:
        description: '"tcp", "udp", or "tcp,udp"'
        type: string
      outboundTag:
        description: Target outbound tag
        type: string
      port:
        description: Destination port, e.g., "53", "1000-2000", 443
        type: string
      protocol:
        description: '"http", "tls", "bittorrent", "dtls" (new)'
        items:
          type: string
        type: array
      source:
        description: Source IPs or CIDRs
        items:
          type: string
        type: array
      sourcePort:
        description: Source port, e.g., "53", "1000-2000", 12345 (New)
        type: string
      targetAddress:
        description: Target address (domain or IP, New)
        items:
          type: string
        type: array
      targetPort:
        description: Target port (New, complements Port which is often destination)
        type: string
      targetUser:
        description: Target user (New)
        items:
          type: string
        type: array
      type:
        description: Default "field"
        type: string
      user:
        description: User emails for authentication based routing
        items:
          type: string
        type: array
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxCertificate:
    properties:
      certificate:
        description: PEM format certificate chain (list of strings)
        items:
          type: string
        type: array
      certificate_path:
        description: Path to PEM certificate chain file
        type: string
      key:
        description: PEM format private key (list of strings)
        items:
          type: string
        type: array
      key_path:
        description: Path to PEM private key file
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxConfig:
    properties:
      certificate:
        description: List of certificate objects
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxCertificate'
        type: array
      createdAt:
        example: "2023-01-02T10:00:00Z"
        type: string
      description:
        example: Experimental Sing-box setup
        type: string
      dns:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSConfig'
      endpoints:
        description: Generic map for various endpoint types
        items:
          additionalProperties: true
          type: object
        type: array
      experimental:
        additionalProperties: true
        type: object
      id:
        example: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
        type: string
      inbounds:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxInbound'
        type: array
      log:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxLogConfig'
      name:
        example: My SingBox Test
        type: string
      ntp:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxNTPConfig'
      outbounds:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxOutbound'
        type: array
      route:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxRouteConfig'
      services:
        description: Generic map for various service types
        items:
          additionalProperties: true
          type: object
        type: array
      updatedAt:
        example: "2023-01-02T11:00:00Z"
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSConfig:
    properties:
      cache_capacity:
        description: New in 1.11.0
        type: integer
      client_subnet:
        description: Global client_subnet default
        type: string
      disable_cache:
        type: boolean
      disable_expire:
        type: boolean
      fakeip:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxFakeIPConfig'
      final:
        description: Tag of final DNS server
        type: string
      hosts:
        additionalProperties: true
        description: 'domain: IP or IP array'
        type: object
      independent_cache:
        type: boolean
      reverse_mapping:
        type: boolean
      rules:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSRule'
        type: array
      servers:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSServer'
        type: array
      strategy:
        description: 'Default DNS strategy: "prefer_ipv4", "prefer_ipv6", "ipv4_only",
          "ipv6_only"'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSDhcpServerSettings:
    properties:
      interface:
        description: '"auto" or specific interface name like "en0"'
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSHTTPSettings:
    properties:
      headers:
        additionalProperties:
          type: string
        type: object
      method:
        description: '"GET" or "POST"'
        type: string
      path:
        description: Defaults to "/dns-query"
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSHostsServerSettings:
    properties:
      data:
        additionalProperties: true
        description: 'Inline hosts data, domain: IP or []IP'
        type: object
      format:
        description: '"plain_text", "domain_set"'
        type: string
      path:
        description: Path to hosts file
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSQUICSettings:
    properties:
      initial_packet_length:
        description: Default 1200
        type: integer
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSRule:
    properties:
      auth_user:
        description: Matching fields
        items:
          type: string
        type: array
      clash_mode:
        description: '"global", "rule", "direct"'
        type: string
      client_subnet:
        description: Override client subnet for this rule
        type: string
      default:
        description: New in 1.9, matches if no other rule matched
        type: boolean
      disable_cache:
        description: Disable DNS cache for this rule
        type: boolean
      domain:
        items:
          type: string
        type: array
      domain_keyword:
        items:
          type: string
        type: array
      domain_regex:
        items:
          type: string
        type: array
      domain_suffix:
        items:
          type: string
        type: array
      executable:
        description: New in 1.9
        items:
          type: string
        type: array
      geoip:
        description: Country code
        items:
          type: string
        type: array
      geosite:
        items:
          type: string
        type: array
      inbound:
        description: Inbound tags
        items:
          type: string
        type: array
      invert:
        type: boolean
      ip_cidr:
        items:
          type: string
        type: array
      ip_version:
        description: 0, 4, 6
        type: integer
      mode:
        description: For "logical" rules
        type: string
      network:
        description: '"tcp", "udp"'
        type: string
      outbound:
        description: Tag of an outbound (becomes a DNS transport)
        type: string
      package_name:
        items:
          type: string
        type: array
      port:
        description: Port or port range string, e.g., "53", "1000-2000"
        items:
          type: string
        type: array
      port_range:
        description: Deprecated by "port"
        items:
          type: string
        type: array
      process_name:
        items:
          type: string
        type: array
      process_path:
        description: New in 1.9
        items:
          type: string
        type: array
      protocol:
        description: '"tls", "http", "quic", "ssh", "stun"'
        items:
          type: string
        type: array
      query_type:
        description: '"A", "AAAA", "CNAME", "MX", "TXT", "ANY", etc. or numeric'
        items:
          type: string
        type: array
      rewrite_ttl:
        description: Rewrite TTL for matched queries
        type: integer
      rule_set:
        items:
          type: string
        type: array
      rules:
        description: Nested rules
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSRule'
        type: array
      server:
        description: Action fields (mutually exclusive, only one should be set)
        type: string
      source_geoip:
        items:
          type: string
        type: array
      source_ip_cidr:
        items:
          type: string
        type: array
      source_port:
        description: Port or port range string
        items:
          type: string
        type: array
      source_port_range:
        description: Deprecated by "source_port"
        items:
          type: string
        type: array
      type:
        description: 'For "logical" rules: "logical"'
        type: string
      user:
        description: New in 1.9
        items:
          type: string
        type: array
      wifi_bssid:
        description: New in 1.9
        items:
          type: string
        type: array
      wifi_ssid:
        description: New in 1.9
        items:
          type: string
        type: array
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSServer:
    properties:
      address:
        description: '--- Legacy Fields (used if type is empty or "legacy") ---'
        type: string
      address_resolver:
        description: 'Legacy: tag of another DNS server'
        type: string
      address_strategy:
        description: 'Legacy: "prefer_ipv4", "prefer_ipv6", "ipv4_only", "ipv6_only"'
        type: string
      bind_interface:
        type: string
      client_subnet:
        description: This can be set per-server, overriding global.
        type: string
      connect_timeout:
        description: duration string
        type: string
      detour:
        type: string
      dhcp:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSDhcpServerSettings'
        description: 'For type: "dhcp"'
      domain_resolver:
        description: string or object
      fallback_delay:
        description: duration string
        type: string
      fallback_network_type:
        items:
          type: string
        type: array
      hosts:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSHostsServerSettings'
        description: 'For type: "hosts"'
      http:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSHTTPSettings'
        description: 'For types: "https", "http3" (DoH/DoH3)'
      inet4_bind_address:
        type: string
      inet6_bind_address:
        type: string
      netns:
        type: string
      network_strategy:
        type: string
      network_type:
        items:
          type: string
        type: array
      quic:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSQUICSettings'
        description: 'For types: "quic", "http3" (underlying QUIC transport)'
      reuse_addr:
        type: boolean
      routing_mark:
        description: int or hex string
      server:
        description: '--- Fields for New Typed Servers (UDP, TCP, TLS, HTTPS, QUIC,
          HTTP3) ---'
        type: string
      server_port:
        description: 'New: Server port'
        type: integer
      strategy:
        description: 'Legacy: Default domain strategy for this server. Also a global
          DNS config field.'
        type: string
      tag:
        type: string
      tcp_fast_open:
        type: boolean
      tcp_multi_path:
        type: boolean
      tls:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSTLSSettings'
        description: '--- Type-Specific Settings ---'
      type:
        description: '"udp", "tcp", "tls", "https", "http3", "quic", "local", "hosts",
          "dhcp", "fakeip", "resolved", "tailscale", or empty for legacy (deprecated)'
        type: string
      udp_fragment:
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxDNSTLSSettings:
    properties:
      alpn:
        items:
          type: string
        type: array
      certificate:
        description: PEM format client certificate chain
        items:
          type: string
        type: array
      certificate_path:
        description: Path to client certificate chain file
        type: string
      cipher_suites:
        items:
          type: string
        type: array
      disable_sni:
        type: boolean
      ech:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxECHConfig'
      insecure:
        type: boolean
      key:
        description: PEM format client private key
        type: string
      key_path:
        description: Path to client private key file
        type: string
      max_version:
        type: string
      min_version:
        description: e.g., "tls1.2", "tls1.3"
        type: string
      server_name:
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxDialFields:
    properties:
      bind_interface:
        type: string
      connect_timeout:
        description: duration string
        type: string
      detour:
        type: string
      domain_resolver:
        description: string or object
      fallback_delay:
        description: duration string
        type: string
      fallback_network_type:
        items:
          type: string
        type: array
      inet4_bind_address:
        type: string
      inet6_bind_address:
        type: string
      netns:
        type: string
      network_strategy:
        type: string
      network_type:
        items:
          type: string
        type: array
      reuse_addr:
        type: boolean
      routing_mark:
        description: int or hex string
      tcp_fast_open:
        type: boolean
      tcp_multi_path:
        type: boolean
      udp_fragment:
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxECHConfig:
    properties:
      config_encoded:
        description: Base64 encoded ECHKeyContents
        type: string
      config_path:
        description: Path to ECHKeyContents
        type: string
      enabled:
        type: boolean
      pq_signature_schemes_enabled:
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxFakeIPConfig:
    properties:
      enabled:
        type: boolean
      excluded_domain:
        description: New in 1.9
        items:
          type: string
        type: array
      excluded_domain_file:
        description: New in 1.9, path to file
        type: string
      http_timeout:
        description: Duration string, default 10s
        type: string
      inet4_mask:
        description: New in 1.9, alternative to inet4_range
        type: string
      inet4_range:
        description: CIDR, e.g., "198.18.0.0/15"
        type: string
      inet6_mask:
        description: New in 1.9, alternative to inet6_range
        type: string
      inet6_range:
        description: CIDR, e.g., "fc00::/18"
        type: string
      store:
        description: New in 1.9, "memory" (default) or "bolt"
        type: string
      store_path:
        description: New in 1.9, path for "bolt" store
        type: string
      udp_timeout:
        description: Duration string, default 10s
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxInbound:
    properties:
      bind_interface:
        type: string
      domain_strategy:
        description: '"prefer_ipv4", "prefer_ipv6", etc.'
        type: string
      inet4_bind_address:
        type: string
      inet6_bind_address:
        type: string
      listen:
        type: string
      listen_port:
        type: integer
      netns:
        description: New in 1.12
        type: string
      proxy_protocol:
        description: 'PROXY protocol version: 0 (disable), 1, 2'
        type: integer
      reuse_addr:
        type: boolean
      routing_mark:
        description: int or hex string
      settings:
        additionalProperties: true
        description: Protocol-specific settings, TLS, and Transport settings are kept
          generic for now.
        type: object
      sniff:
        type: boolean
      sniff_override_destination:
        type: boolean
      sniff_timeout:
        description: Duration string
        type: string
      tag:
        description: Unique tag for this inbound
        type: string
      tcp_fast_open:
        type: boolean
      tls:
        additionalProperties: true
        description: TLS settings object, see shared/tls
        type: object
      transport:
        additionalProperties: true
        description: Transport settings object, see shared/v2ray-transport
        type: object
      type:
        description: Protocol type, e.g., "mixed", "socks", "http", "vmess", etc.
        type: string
      udp_fragment:
        description: Deprecated in 1.9, use udp_mtu
        type: boolean
      udp_mtu:
        description: New in 1.9
        type: integer
      udp_timeout:
        description: Duration string
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxLogConfig:
    properties:
      disabled:
        type: boolean
      level:
        description: e.g., "trace", "debug", "info", "warn", "error", "fatal", "panic"
        type: string
      output:
        description: file path
        type: string
      timestamp:
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxNTPConfig:
    properties:
      detour:
        description: Outbound tag for NTP requests (legacy, part of dial_fields now
          but often shown standalone)
        type: string
      dial_fields:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxDialFields'
        description: New in 1.12 for extended dial options
      enabled:
        type: boolean
      interval:
        description: 'Duration string, default: "1h"'
        type: string
      server:
        description: 'Default: "time.apple.com"'
        type: string
      server_port:
        description: 'Default: 123'
        type: integer
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxOutbound:
    properties:
      multiplex:
        additionalProperties: true
        description: Multiplex settings object
        type: object
      settings:
        additionalProperties: true
        description: Protocol-specific settings
        type: object
      tag:
        type: string
      tls:
        additionalProperties: true
        description: TLS settings object
        type: object
      transport:
        additionalProperties: true
        description: Transport settings object
        type: object
      type:
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxRouteConfig:
    properties:
      auto_detect_interface:
        description: 'Default: true'
        type: boolean
      default_domain_resolver:
        description: Tag of a DNS server (New in 1.12)
        type: string
      default_interface:
        description: Default physical outbound interface
        type: string
      default_mark:
        description: SO_MARK for outbound packets
        type: integer
      domain_strategy:
        description: '"prefer_ipv4", "prefer_ipv6", "ipv4_only", "ipv6_only", "asio"
          (deprecated), UseIP (Xray term?)'
        type: string
      final:
        description: Default outbound tag
        type: string
      geoip:
        additionalProperties: true
        description: GeoIP configuration object
        type: object
      geosite:
        additionalProperties: true
        description: Geosite configuration object
        type: object
      independent_cache:
        description: For rule_set matching result cache (New in 1.9)
        type: boolean
      override_android_vpn:
        description: 'Default: true'
        type: boolean
      rule_set:
        description: List of RuleSet objects
        items:
          additionalProperties: true
          type: object
        type: array
      rules:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxRouteRule'
        type: array
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SingBoxRouteRule:
    properties:
      auth_user:
        description: '--- Matching fields ---'
        items:
          type: string
        type: array
      balancer:
        description: Tag of a balancer outbound to use (New in 1.9)
        type: string
      clash_mode:
        description: '"global", "rule", "direct"'
        type: string
      default:
        description: New in 1.9, matches if no other preceding rule matched
        type: boolean
      domain:
        items:
          type: string
        type: array
      domain_keyword:
        items:
          type: string
        type: array
      domain_regex:
        items:
          type: string
        type: array
      domain_suffix:
        items:
          type: string
        type: array
      email:
        description: New in 1.9
        items:
          type: string
        type: array
      executable:
        description: New in 1.9
        items:
          type: string
        type: array
      geoip:
        description: Country code, e.g., "CN"
        items:
          type: string
        type: array
      geosite:
        items:
          type: string
        type: array
      inbound:
        description: string or []string of inbound tags
      invert:
        type: boolean
      ip_cidr:
        description: Renamed from 'ip'
        items:
          type: string
        type: array
      ip_version:
        description: 0 (any), 4, 6
        type: integer
      mode:
        description: '"and" or "or"'
        type: string
      network:
        description: 'string or []string: "tcp", "udp"'
      notes:
        description: New in 1.9 (comment field, not for matching)
        type: string
      outbound:
        description: '--- Action fields (only one of these should be set per rule)
          ---'
        type: string
      package_name:
        items:
          type: string
        type: array
      port:
        description: string, int, or list of these (e.g., "80", 443, "1000-2000")
      process_name:
        items:
          type: string
        type: array
      process_path:
        items:
          type: string
        type: array
      protocol:
        description: 'string or []string: "tls", "http", "quic", "ssh", "stun", etc.'
      rule_set:
        items:
          type: string
        type: array
      rules:
        description: Nested rules
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxRouteRule'
        type: array
      source_geoip:
        items:
          type: string
        type: array
      source_ip_cidr:
        description: Renamed from 'source_ip'
        items:
          type: string
        type: array
      source_port:
        description: string, int, or list of these
      type:
        description: '--- For "logical" rules ---'
        type: string
      user:
        description: New in 1.9
        items:
          type: string
        type: array
      wifi_bssid:
        description: New in 1.9
        items:
          type: string
        type: array
      wifi_ssid:
        description: New in 1.9
        items:
          type: string
        type: array
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SniffingObject:
    properties:
      appProtocol:
        description: New in v1.8.7, for application layer protocol sniffing
        items:
          type: string
        type: array
      appProtocolPort:
        description: New in v1.8.7, port range for app protocol sniffing
        type: string
      destOverride:
        description: '"http", "tls", "fakedns", "quic" (new)'
        items:
          type: string
        type: array
      domainsExcluded:
        description: New
        items:
          type: string
        type: array
      enabled:
        description: Default true if object exists
        type: boolean
      metadataOnly:
        description: New, for fakedns to sniff SNI/ALPN only
        type: boolean
      routeOnly:
        description: New, if true, sniffing result is only for routing
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SocketOptions:
    properties:
      acceptProxyProtocol:
        type: boolean
      dialerProxy:
        description: Tag of an outbound proxy
        type: string
      domainStrategy:
        description: '"UseIP", "UseIPv4", "UseIPv6", "AsIs"'
        type: string
      interface:
        description: Bind to a specific network interface
        type: string
      mark:
        description: SO_MARK
        type: integer
      tcpCongestion:
        description: TCP congestion control algorithm
        type: string
      tcpFastOpen:
        description: TCP Fast Open queue length
        type: integer
      tcpKeepAliveIdle:
        description: TCP_KEEPIDLE (seconds)
        type: integer
      tcpKeepAliveInterval:
        description: TCP_KEEPINTVL (seconds)
        type: integer
      tcpMptcp:
        description: TCP MPTCP
        type: boolean
      tcpNoDelay:
        description: TCP_NODELAY
        type: boolean
      tcpUserTimeout:
        description: New, TCP_USER_TIMEOUT (milliseconds)
        type: integer
      tproxy:
        description: '"redirect", "tproxy", "off"'
        type: string
      udpReusable:
        description: New, SO_REUSEADDR for UDP
        type: boolean
      udpTimeout:
        description: New, timeout for UDP connections in seconds
        type: integer
      v6only:
        description: IPV6_V6ONLY
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.StatsObject:
    type: object
  github_com_tools4net_ezfw_backend_internal_models.StreamSettingsObject:
    properties:
      dsSettings:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.DomainSocketSettings'
        description: Domain Socket settings
      grpcSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.GRPCSettings'
      httpSettings:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.HTTP2Settings'
        description: For HTTP/2
      kcpSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.KCPSettings'
      network:
        description: '"tcp", "kcp", "ws", "http" (HTTP/2), "domainsocket", "quic",
          "grpc"'
        type: string
      quicSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.QUICSettings'
      security:
        description: '"none", "tls", "xtls", "reality"'
        type: string
      sockopt:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SocketOptions'
      tcpSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.TCPSettings'
      tlsSettings:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.TLSSettings'
        description: 'Used for security: "tls" or "reality"'
      wsSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.WSSettings'
      xtlsSettings:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.XTLSSettings'
        description: 'Used for security: "xtls"'
    type: object
  github_com_tools4net_ezfw_backend_internal_models.SystemPolicy:
    properties:
      overrideAccessLogAddress:
        description: Override inbound's access log address with Xray's address. (Newer
          field)
        type: boolean
      overrideAccessLogPort:
        description: Override inbound's access log port with Xray's port. (Newer field)
        type: boolean
      statsInboundDownlink:
        description: Enable downlink stats for all inbounds, default false.
        type: boolean
      statsInboundUplink:
        description: Enable uplink stats for all inbounds, default false.
        type: boolean
      statsOutboundDownlink:
        description: Enable downlink stats for all outbounds, default false.
        type: boolean
      statsOutboundUplink:
        description: Enable uplink stats for all outbounds, default false.
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.TCPSettings:
    properties:
      acceptProxyProtocol:
        description: For HAProxy's PROXY protocol
        type: boolean
      congestion:
        description: Corresponds to sockopt TCP_CONGESTION. Often set here.
        type: string
      header:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.HeaderObject'
      tcpKeepAliveInterval:
        description: Corresponds to sockopt TCP_KEEPINTVL. Often set here.
        type: integer
      tcpNoDelay:
        description: Corresponds to sockopt TCP_NODELAY. Often set here for convenience.
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.TLSSettings:
    properties:
      allowInsecure:
        type: boolean
      alpn:
        description: e.g., "http/1.1", "h2"
        items:
          type: string
        type: array
      certificates:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.Certificate'
        type: array
      cipherSuites:
        description: Colon-separated list
        type: string
      disableSystemRoot:
        description: Default false
        type: boolean
      enableSessionResumption:
        description: Default false
        type: boolean
      fingerprint:
        description: '"chrome", "firefox", "safari", "ios", "android", "edge", "360",
          "qq", "random", "randomized"'
        type: string
      masterKeyLog:
        description: New, path to log TLS master key
        type: string
      maxVersion:
        type: string
      minVersion:
        description: '"1.0", "1.1", "1.2", "1.3"'
        type: string
      pinnedPeerCertificateChainSha256:
        description: New
        items:
          type: string
        type: array
      realitySettings:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.RealitySettingsObject'
        description: 'New, for security: "reality"'
      rejectUnknownSni:
        description: New, default false
        type: boolean
      serverName:
        description: SNI
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.TransportObject:
    properties:
      dsSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.DomainSocketSettings'
      grpcSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.GRPCSettings'
      httpSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.HTTP2Settings'
      kcpSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.KCPSettings'
      quicSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.QUICSettings'
      sockopt:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SocketOptions'
      tcpSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.TCPSettings'
      wsSettings:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.WSSettings'
    type: object
  github_com_tools4net_ezfw_backend_internal_models.WSSettings:
    properties:
      acceptProxyProtocol:
        type: boolean
      earlyDataHeaderName:
        description: New
        type: string
      headers:
        additionalProperties:
          type: string
        type: object
      maxEarlyData:
        description: New
        type: integer
      path:
        type: string
      useBrowserForwarding:
        description: New, default false
        type: boolean
    type: object
  github_com_tools4net_ezfw_backend_internal_models.XTLSSettings:
    properties:
      allowInsecure:
        type: boolean
      alpn:
        items:
          type: string
        type: array
      certificates:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.Certificate'
        type: array
      cipherSuites:
        type: string
      disableSystemRoot:
        description: Default false
        type: boolean
      fingerprint:
        description: Not typically used with XTLS server-side
        type: string
      maxVersion:
        type: string
      minVersion:
        description: '"1.0", "1.1", "1.2", "1.3"'
        type: string
      pinnedPeerCertificateChainSha256:
        items:
          type: string
        type: array
      serverName:
        description: SNI
        type: string
    type: object
  github_com_tools4net_ezfw_backend_internal_models.XrayConfig:
    properties:
      api:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.APIObject'
      burstObservatory:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.BurstObservatoryObject'
        description: Project X specific
      created_at:
        example: "2023-01-01T12:00:00Z"
        type: string
      description:
        example: Main Xray server configuration
        type: string
      dns:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.DNSObject'
      fakedns:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.FakeDNSObject'
      id:
        description: Internal ID for database
        example: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
        type: string
      inbounds:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.InboundObject'
        type: array
      log:
        allOf:
        - $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.LogObject'
        description: Core Xray configuration fields
      metrics:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.MetricsObject'
      name:
        description: User-defined name for the config
        example: My Default Xray Config
        type: string
      observatory:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ObservatoryObject'
      outbounds:
        items:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.OutboundObject'
        type: array
      policy:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.PolicyObject'
      reverse:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ReverseObject'
      routing:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.RoutingObject'
      services:
        additionalProperties: true
        description: New, for pluggable services
        type: object
      stats:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.StatsObject'
      transport:
        $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.TransportObject'
      updated_at:
        example: "2023-01-01T13:00:00Z"
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@example.com
    name: API Support
    url: https://github.com/tools4net/ezfw/issues
  description: This is the API for managing EZFW (Easy Firewall/Proxy) configurations
    for Xray and Sing-box.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://example.com/terms/
  title: EZFW API
  version: "1.0"
paths:
  /configs/singbox:
    get:
      description: Retrieves a paginated list of SingBox configurations.
      parameters:
      - default: 10
        description: Number of items to return per page
        example: 10
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset for pagination
        example: 0
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: A list of SingBox configurations
          schema:
            additionalProperties:
              items:
                $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxConfig'
              type: array
            type: object
        "500":
          description: Internal Server Error - Failed to list configurations
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: List SingBox Configs
      tags:
      - ConfigsSingBox
    post:
      consumes:
      - application/json
      description: Adds a new SingBox configuration to the store.
      parameters:
      - description: SingBox Configuration Object
        in: body
        name: singBoxConfig
        required: true
        schema:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxConfig'
      produces:
      - application/json
      responses:
        "201":
          description: Successfully created SingBox configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxConfig'
        "400":
          description: Bad Request - Invalid input or missing name
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to create configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Create SingBox Config
      tags:
      - ConfigsSingBox
  /configs/singbox/{configId}:
    delete:
      description: Deletes a specific SingBox configuration by its ID.
      parameters:
      - description: SingBox Configuration ID
        in: path
        name: configId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success message
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request - Invalid or missing configuration ID
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "404":
          description: Not Found - Configuration not found for deletion
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to delete configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Delete SingBox Config
      tags:
      - ConfigsSingBox
    get:
      description: Fetches a single SingBox configuration based on its unique ID.
      parameters:
      - description: SingBox Configuration ID
        in: path
        name: configId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully retrieved SingBox configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxConfig'
        "400":
          description: Bad Request - Invalid or missing configuration ID
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "404":
          description: Not Found - Configuration not found
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to retrieve configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get SingBox Config by ID
      tags:
      - ConfigsSingBox
    put:
      consumes:
      - application/json
      description: Modifies an existing SingBox configuration by its ID.
      parameters:
      - description: SingBox Configuration ID
        in: path
        name: configId
        required: true
        type: string
      - description: SingBox Configuration Object
        in: body
        name: singBoxConfig
        required: true
        schema:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxConfig'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated SingBox configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.SingBoxConfig'
        "400":
          description: Bad Request - Invalid input, missing ID, or missing name
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "404":
          description: Not Found - Configuration not found for update
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to update configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Update SingBox Config
      tags:
      - ConfigsSingBox
  /configs/singbox/{configId}/generate:
    get:
      description: Retrieves a SingBox configuration and returns it in a format suitable
        for the sing-box binary, stripping internal metadata.
      parameters:
      - description: SingBox Configuration ID
        in: path
        name: configId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: The core SingBox configuration JSON. The actual structure depends
            on the config (models.SingBoxConfig without metadata).
          schema:
            type: object
        "400":
          description: Bad Request - Invalid or missing configuration ID
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "404":
          description: Not Found - Configuration not found
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to retrieve configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Generate SingBox Config File
      tags:
      - ConfigsSingBox
  /configs/xray:
    get:
      description: Retrieves a paginated list of Xray configurations.
      parameters:
      - default: 10
        description: Number of items to return per page
        example: 10
        in: query
        name: limit
        type: integer
      - default: 0
        description: Offset for pagination
        example: 0
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: A list of Xray configurations
          schema:
            additionalProperties:
              items:
                $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.XrayConfig'
              type: array
            type: object
        "500":
          description: Internal Server Error - Failed to list configurations
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: List Xray Configs
      tags:
      - ConfigsXray
    post:
      consumes:
      - application/json
      description: Adds a new Xray configuration to the store. Name must be unique.
      parameters:
      - description: Xray Configuration Object
        in: body
        name: xrayConfig
        required: true
        schema:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.XrayConfig'
      produces:
      - application/json
      responses:
        "201":
          description: Successfully created Xray configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.XrayConfig'
        "400":
          description: Bad Request - Invalid input or missing name
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "409":
          description: Conflict - Configuration name already exists
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to create configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Create Xray Config
      tags:
      - ConfigsXray
  /configs/xray/{configId}:
    delete:
      description: Deletes a specific Xray configuration by its ID.
      parameters:
      - description: Xray Configuration ID
        in: path
        name: configId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Success message
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request - Invalid or missing configuration ID
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "404":
          description: Not Found - Configuration not found for deletion
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to delete configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Delete Xray Config
      tags:
      - ConfigsXray
    get:
      description: Fetches a single Xray configuration based on its unique ID.
      parameters:
      - description: Xray Configuration ID
        in: path
        name: configId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully retrieved Xray configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.XrayConfig'
        "400":
          description: Bad Request - Invalid or missing configuration ID
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "404":
          description: Not Found - Configuration not found
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to retrieve configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Get Xray Config by ID
      tags:
      - ConfigsXray
    put:
      consumes:
      - application/json
      description: Modifies an existing Xray configuration by its ID. Name must be
        unique among Xray configs.
      parameters:
      - description: Xray Configuration ID
        in: path
        name: configId
        required: true
        type: string
      - description: Xray Configuration Object
        in: body
        name: xrayConfig
        required: true
        schema:
          $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.XrayConfig'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated Xray configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.XrayConfig'
        "400":
          description: Bad Request - Invalid input, missing ID, or missing name
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "404":
          description: Not Found - Configuration not found for update
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "409":
          description: Conflict - Configuration name already exists for another configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to update configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Update Xray Config
      tags:
      - ConfigsXray
  /configs/xray/{configId}/generate:
    get:
      description: Retrieves an Xray configuration and returns it in a format suitable
        for the Xray-core binary, stripping internal metadata.
      parameters:
      - description: Xray Configuration ID
        in: path
        name: configId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: The core Xray configuration JSON. The actual structure depends
            on the config (models.XrayConfig without metadata).
          schema:
            type: object
        "400":
          description: Bad Request - Invalid or missing configuration ID
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "404":
          description: Not Found - Configuration not found
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
        "500":
          description: Internal Server Error - Failed to retrieve configuration
          schema:
            $ref: '#/definitions/github_com_tools4net_ezfw_backend_internal_models.ErrorResponse'
      security:
      - ApiKeyAuth: []
      summary: Generate Xray Config File
      tags:
      - ConfigsXray
securityDefinitions:
  ApiKeyAuth:
    description: API Key for authentication. Prepend with "Bearer " if it's a bearer
      token, otherwise just the key. For this API, just the key is expected.
    in: header
    name: X-API-Key
    type: apiKey
swagger: "2.0"
